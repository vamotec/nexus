# =============================================
# Scalafmt configuration for Scala 3.7.x
# Supports significant indentation syntax (optional braces)
# =============================================

version = "3.10.1"  # 请根据实际最新版本更新

# ====================
# Parser & Scala Version
# ====================
runner.dialect = scala3

# ====================
# Indentation & Alignment
# ====================
align.openParenCallSite = false
align.openParenDefnSite = false
align.tokens = ["="]

indent {
  callSite = 2          # 方法调用参数缩进
  defnSite = 2          # 定义缩进
}

continuationIndent.callSite = 2
continuationIndent.defnSite = 2

# ====================
# Line Length & Wrapping
# ====================
maxColumn = 120
newlines {
  sometimesBeforeColonInMethodReturnType = true
  beforeMultilineDef = keep
}

# ====================
# Braces & Significant Indentation
# ====================
style = defaultWithAlign
rewrite.rules = [RedundantBraces, PreferCurlyFors, SortImports]

# ====================
# Imports
# ====================
importSelectors = singleLine

# ====================
# Other preferences
# ====================
trailingCommas = preserve
verticalMultiline.arityThreshold = 2

# Scalafmt 配置
//version = "3.10.1"
//
//# 运行器
//runner.dialect = scala3
//
//# 最大列宽
//maxColumn = 120
//
//# 缩进
//indent.main = 2
//indent.significant = 2
//indent.callSite = 2
//indent.defnSite = 2
//
//# 对齐
//align.preset = more
//align.tokens = [
//  {code = "=>", owner = "Case"},
//  {code = "%", owner = "Term.ApplyInfix"},
//  {code = "%%", owner = "Term.ApplyInfix"}
//]
//align.arrowEnumeratorGenerator = true
//align.openParenCallSite = false
//align.openParenDefnSite = false
//
//# 换行
//newlines.beforeCurlyLambdaParams = multilineWithCaseOnly
//newlines.afterCurlyLambdaParams = squash
//newlines.implicitParamListModifierPrefer = before
//newlines.alwaysBeforeElseAfterCurlyIf = false
//
//# 重写规则
//rewrite.rules = [
//  RedundantBraces,
//  RedundantParens,
//  SortModifiers,
//  PreferCurlyFors
//]
//rewrite.redundantBraces.maxLines = 1
//rewrite.redundantBraces.stringInterpolation = true
//
//# 导入排序
//rewrite.imports.sort = scalastyle
//rewrite.imports.groups = [
//  ["zio\\..*"],
//  ["scala\\..*"],
//  ["java\\..*"],
//  ["com\\.robosim\\..*"]
//]
//
//# 尾随逗号
//rewrite.trailingCommas.style = multiple
//rewrite.trailingCommas.allowFolding = true
//
//# 文档字符串
//docstrings.style = Asterisk
//docstrings.oneline = fold
//docstrings.wrap = yes
//
//# 空格
//spaces.inImportCurlyBraces = false
//spaces.beforeContextBoundColon = Never
//
//# 垂直多行
//verticalMultiline.atDefnSite = true
//verticalMultiline.arityThreshold = 3
//verticalMultiline.newlineAfterOpenParen = true
//
//# 项目配置
//project.git = true
//project.excludeFilters = [
//  "target/.*"
//]